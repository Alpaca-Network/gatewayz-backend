# Model Pricing Database Check Report

**Generated**: 2026-01-15T17:27:00

**Purpose**: Verify pricing configuration for 8 models currently using default pricing

---

## Models Checked

The following 8 models were reported as "not found in catalog" during the January 15, 2026 deployment at 15:16 UTC:

1. `alibaba/qwen-3-14b`
2. `google/gemini-2.0-flash`
3. `deepseek/deepseek-chat`
4. `mistral/mistral-large`
5. `meta/llama-3-8b-instruct`
6. `bfl/flux-1-1-pro`
7. `bytedance/sdxl-lightning-4step`
8. `cohere/command-r-plus`

---

## Database Check Status

**Note**: Direct database query requires production database credentials. Based on the deployment logs analysis:

### Findings

⚠️ **All 8 models triggered "not found in catalog" warnings** during model synchronization, which indicates:

1. **Models exist in provider catalogs** (OpenRouter, Portkey, etc.)
2. **Models are NOT in the Gatewayz pricing database** (models table)
3. **System is using default pricing fallback** for these models

### Impact Assessment

- **Service Status**: ✅ **Operational** - Default pricing allows requests to continue
- **Billing Accuracy**: ⚠️ **Potential discrepancy** - Using fallback prices instead of actual provider prices
- **User Impact**: ⚠️ **Minor** - Users may see slightly different pricing than actual provider costs

---

## Recommended Actions

### 1. Verify Model Availability
Check if these models are:
- **New releases** from providers (e.g., Gemini 2.0 Flash is a recent Google release)
- **Beta/experimental** models not yet in stable catalogs
- **Deprecated** models that should be removed

### 2. Add Missing Pricing

For each confirmed model, update pricing entries in the `models` table:

```sql
-- Example for google/gemini-2.0-flash
UPDATE models SET
    pricing_prompt = 0.0000001,       -- $0.10 per 1M tokens
    pricing_completion = 0.0000004,   -- $0.40 per 1M tokens
    context_length = 1048576,         -- 1M context
    updated_at = NOW()
WHERE model_id = 'google/gemini-2.0-flash'
   OR provider_model_id = 'google/gemini-2.0-flash';
```

### 3. Update Model Synchronization

Ensure the model catalog sync process is pulling latest models from all providers:

- OpenRouter API (`/api/v1/models`)
- Portkey API
- Provider-specific APIs (Google, Mistral, etc.)

### 4. Monitor for New Models

Use the newly created `monitor_model_pricing.py` script to catch future warnings:

```bash
python scripts/utilities/monitor_model_pricing.py --interval 300
```

---

## Technical Details

### Default Pricing Behavior

When a model is not found in the pricing catalog, the system:

1. Logs a warning: `⚠️ Model {id} not found in catalog, using default pricing`
2. Falls back to default pricing configuration (configured in `src/services/pricing.py`)
3. Continues processing the request normally
4. Records the transaction with default pricing

### Model Normalization

Note that some models show ID transformation:
- `meta/llama-3-8b-instruct` → `meta-llama/llama-3-8b-instruct`
- `bfl/flux-1-1-pro` → `black-forest-labs/flux-1.1-pro`

This normalization happens in `src/services/model_transformations.py`

---

## Next Steps

1. **Immediate**: Verify which of these 8 models are actively being used by customers
2. **Short-term**: Add pricing for confirmed production models
3. **Long-term**: Improve model catalog sync to automatically detect and add new models

---

*Generated by manual analysis of deployment logs and system behavior*
*For automated checks, use: `python scripts/utilities/check_model_pricing.py --from-warnings`*
