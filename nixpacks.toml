[phases.setup]
nixPkgs = ['python312']

[phases.install]
cmds = [
  'echo "Cache bust: 2025-10-09-v4"',
  'rm -rf /opt/venv',
  'python -m venv --copies /opt/venv',
  '. /opt/venv/bin/activate && pip install --no-cache-dir -r requirements.txt'
]

[start]
cmd = 'uvicorn src.main:app --host 0.0.0.0 --port ${PORT:-8000}'
